<?xml version="1.0" standalone="yes"?>
<!--
*************************************************************************************************************
* Agent-Object-Relationship (AOR) Simulation
* Ontologically well-founded and closer-to-reality simulation of complex discrete event scenarios
*
* AOR-JSim v.2
*
* Copyright (C) 2008 AOR Team: Daniel Draeger, Adrian Giurca, Emilian Pascalau, Andreas Post, Marco Pehla,
* Gerd Wagner, Jens Werner, Mircea Diaconescu
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program; if not, write to the Free Software
* Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
*************************************************************************************************************
-->
<!--
* @author Mircea Diaconescu
* @since October 29, 2009
* @version: 1.0
-->
<project name="Statistics module" default="build" basedir=".">
	<description>
        This ANT file builds an executeable JAR archive from the statistics module
        and copy it to the plugins directory.
    </description>

	<import file="../build.xml" />

	<property name="jar.filename" value="statisticsModule.jar" />
	<property name="dist.dir" value="./dist" />
	<property name="lib.dir" value="./lib" />
	<property name="class.dir" value="${dist.dir}" />
	<property name="include.dir" value="../../../" />
	<property name="modules.dir" value="../../../../modules" />

	<path id="classpath">
		<fileset dir="${lib.dir}">
			<include name="*.jar" />
		</fileset>
	</path>


	<target name="clean" description="cleans the project">
		<!-- remove all created dirs/files -->
		<echo message="Cleaning, please wait..." />
		<delete includeemptydirs="true" failonerror="false">
			<fileset dir="${dist.dir}" />
		</delete>
	</target>

	<target name="compile" depends="compileAORS">
		<mkdir dir="${dist.dir}" />
		<echo message="Compile sound module sources, please wait..." />
		<javac destdir="${class.dir}" classpathref="classpath" debug="true">
			<src path="${include.dir}/aors" />
			<include name="module/statistics/**" />
			<compilerarg value="-Xlint" />
		</javac>
		<echo message="Statistics module sources were compiled with success." />
	</target>

	<target name="build" depends="clean, compile" description="Build the statistics module.">
		<echo message="Creating the required structure, please wait..." />

		<copy todir="${dist.dir}/${lib.dir}" overwrite="true">
			<fileset dir="${lib.dir}" includes="*.jar" />
		</copy>

		<copy todir="${dist.dir}" overwrite="true">
			<fileset dir=".">
				<filename name="properties.xml" />
			</fileset>
		</copy>

		<mkdir dir="${dist.dir}/aors/module/statistics/gui/lang" />
		<copy todir="${dist.dir}/aors/module/statistics/gui/lang">
			<fileset dir="./gui/lang" includes="*.properties" />
		</copy>

		<mkdir dir="${dist.dir}/html" />
		<copy todir="${dist.dir}/html">
			<fileset dir="./html" includes="*.css, *.js" />
		</copy>

		<echo message="Build jar file, please wait..." />
		<jar destfile="${dist.dir}/${jar.filename}" basedir="${class.dir}">
			<include name="aors/module/statistics/**" />
			<include name="properties.xml" />
			<include name="lib/**" />
			<include name="aors/module/statistics/gui/lang/**" />
			<include name="html/**" />
		</jar>

		<copy todir="${modules.dir}" overwrite="true">
			<fileset dir="${dist.dir}">
				<filename name="${jar.filename}" />
			</fileset>
		</copy>

		<antcall target="clean" />

		<echo message="Task completed. Statistics module file ${jar.filename} was build and the jar was copied to ${modules.dir}." />
	</target>

</project>
