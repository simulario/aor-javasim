<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="prettyprint.xsl"?>
<SimulationScenario version="0.8.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://aor-simulation.org ../../../../ext/aorsl/AORSL-0-8-3.xsd"
	xmlns="http://aor-simulation.org" xmlns:aors="http://aor-simulation.org"
	xmlns:dc="http://purl.org/dc/elements/1.1/" scenarioName="heiringTest"
	scenarioTitle="Test for physical agents">

	<SimulationParameters simulationSteps="200" stepDuration="1" timeUnit="Y" stepTimeDelay="30" randomSeed="10"/>

	<SimulationModel modelName="heiringTest" modelTitle="Test for heiring">

		<documentation>
			<dc:creator>Martin MÃ¼ller</dc:creator>
			<dc:created>2010-02-08</dc:created>
			<dc:description>Test for heiring</dc:description>
		</documentation>
		
		<EntityTypes>
			
			<!--
				
				possible to implement this? heiring should be available.
				i.e. it should be possible to create a physical agent by deriving it from a standard object.
				
			<ObjectType name="StandardObject">
				<Attribute type="String" name="commonName"/>
			</ObjectType>
			
			<PhysicalObjectType name="StandardPhysicalObject" superType="StandardObject">
				<Attribute type="Integer" name="m" initialValue="10"/>
			</PhysicalObjectType>
			
			<AgentType name="StandardAgent" superType="StandardObject">
				<SelfBeliefAttribute type="Integer" name="age" initialValue="1" />
			</AgentType>
			
			<PhysicalAgentType name="StandardPhysicalAgent" superType="StandardPhysicalObject">
				<InitialAttributeValue attribute="m" value="50"/>
				<SubjectiveFunction name="updateMyWeight" resultType="Integer">
					<Body language="Java"> <![CDATA[ return getM();	]]> </Body>
				</SubjectiveFunction>
			</PhysicalAgentType>
			
			<PhysicalAgentType name="Marvin" superType="StandardPhysicalAgent">
				<Attribute type="Integer" name="m" initialValue="100"/>
			</PhysicalAgentType> 
			
			-->
			
			<PhysicalAgentType name="Person">
				<Attribute type="Integer" name="m" initialValue="50"/>
				<Attribute type="Integer" name="age" initialValue="20"/>
			</PhysicalAgentType>
			
			<PhysicalAgentType name="Male" superType="Person">
				<Attribute type="String" name="gender" initialValue="m"/>
			</PhysicalAgentType>
			
			<PhysicalAgentType name="Female" superType="Person">
				<Attribute type="String" name="gender" initialValue="f"/>
			</PhysicalAgentType>
			
			<PhysicalAgentType name="Boy" superType="Male">
				<InitialAttributeValue attribute="age" value="12"/>
			</PhysicalAgentType>
			
			<PhysicalAgentType name="Girl" superType="Female">
				<InitialAttributeValue attribute="age" value="12"/>
				<InitialAttributeValue attribute="m" value="40"/>
			</PhysicalAgentType>
			
		</EntityTypes>
		
		<EnvironmentRules>
			
			<EnvironmentRule name="updateAgePersons">
				<ON-EACH-SIMULATION-STEP/>
				<FOR objectType="Person" objectVariable="p" />
				<DO>
					<UPDATE-ENV>
						<UpdateObject objectVariable="p">
							<Slot property="age">
								<ValueExpr language="Java">p.getAge() + 1</ValueExpr>
							</Slot>
						</UpdateObject>
					</UPDATE-ENV>
				</DO>
			</EnvironmentRule>
			
			<EnvironmentRule name="updateAdditionalYearRange">
				<ON-EACH-SIMULATION-STEP/>
				<FOR rangeStartID="6" rangeEndID="14" objectType="Person" objectVariable="p" />
				<DO>
					<UPDATE-ENV>
						<UpdateObject objectVariable="p">
							<Slot property="age">
								<ValueExpr language="Java">p.getAge() + 1</ValueExpr>
							</Slot>
						</UpdateObject>
					</UPDATE-ENV>
				</DO>
			</EnvironmentRule>
			
			<EnvironmentRule name="destroyOld">
				<ON-EACH-SIMULATION-STEP/>
				<FOR objectType="Person" objectVariable="p"/>
				<IF language="Java">p.getAge() &gt; 100</IF>
				<THEN>
					<UPDATE-ENV>
						<DestroyObject objectVariable="p" />
					</UPDATE-ENV>
				</THEN>
			</EnvironmentRule>
		</EnvironmentRules>
		
	</SimulationModel>
	
	<InitialState>
		
		<PhysicalAgents type="Boy" rangeStartID="1" rangeEndID="10" />
		<PhysicalAgents type="Girl" rangeStartID="11" rangeEndID="20">
			<Slot property="age" value="13" />
		</PhysicalAgents>
		
	</InitialState>
	
	

</SimulationScenario>
